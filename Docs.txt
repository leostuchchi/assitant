Документация проекта Personal Assistant
Overview

Personal Assistant — это персональный Telegram-бот, который предоставляет пользователям персонализированные рекомендации на основе астрологических расчетов, биоритмов, психоматриц и прогностических данных. Проект реализован с использованием асинхронного Python (aiogram), PostgreSQL, Docker и Swiss Ephemeris для астрологии.
Структура проекта

    bot/ — код Telegram-бота

        config.py — переменные окружения (токен бота)

        handlers.py — обработчики сообщений, FSM для сбора данных пользователя

        main.py — точка входа и запуск бота

        __init__.py — инициализация модуля

    backend/ — бизнес-логика и вычисления

        assistant.py — главный класс с логикой сбора, обработки и выдачи рекомендаций

        biorhythm_calculator.py — расчет биоритмов

        matrix_services.py — расчет психоматриц (нумерология)

        natal_chart.py — расчет и построение натальных карт

        prediction_services.py — генерация и форматирование прогнозов и рекомендаций

        database.py, db_connection.py — работа с базой данных на async SQLAlchemy

        moon.py — расчет лунных фаз

        Другие сервисы: chart_services.py, psyho_matrix.py, user_services.py

    data_base p_assistant_bd — база данных PostgreSQL

        Таблицы пользователей, натальных карт, психоматриц, биоритмов, предсказаний

        Индексы для оптимизации запросов

        Правила доступа и транзакции

    docker-compose.yml

        Сервис базы данных PostgreSQL с volume для хранения данных

        Автоматическая проверка доступности базы

    logging

        Логирование в файл и консоль с уровнями INFO и ERROR для отладки и мониторинга

Функциональные возможности

    Интерактивный сбор данных: дата и время рождения, города, профессия, должность через Telegram FSM

    Расчет и хранение натальной карты с учетом разных систем домов, планет, аспектов

    Расчет биоритмов: физического, эмоционального, интеллектуального и интуитивного циклов с рекомендациями

    Расчет психоматрицы по методу Пифагора с анализом ключевых чисел

    Генерация ежедневных персонализированных рекомендаций

    Поддержка запросов статуса данных и помощи по командам

    Очистка устаревших данных для поддержания производительности

    Передача данных для AI модели в структурированном виде

Технические детали

    Используется Python 3.11+, библиотеки aiogram, asyncpg, SQLAlchemy

    Асинхронное взаимодействие с БД, предотвращение блокировок

    Ошибки обрабатываются и логируются для устойчивости

    Модульность обеспечивает удобство добавления новых расчетов и функций

    Docker-контейнер с PostgreSQL для удобина развертывания и настройки

Дополнения и рекомендации

    База данных расширяется JSONB колонками для гибкости хранения сложных данных

    Биоритмы, натальная карта, прогнозы и психоматрица реализованы как отдельные классы с чистым API

    Возможна интеграция дополнительных астрологических и нумерологических расчетов

    Необходимо поддерживать расширенную валидацию данных и тесты для предотвращения ошибок

    Интерфейс можно улучшить подсказками и возможностью обновлять отдельные поля без повторных сборов

Запуск и настройка

    Установить зависимости из requirements.txt

    Запустить docker-compose up -d для создания и запуска БД

    Настроить переменную окружения TELEGRAM_BOT_TOKEN в .env

    Запустить бота командой python -m bot.main

    Мониторить логи bot.log для отладки

